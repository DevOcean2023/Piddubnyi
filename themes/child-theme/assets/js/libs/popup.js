import i from"./live-dom";import t from"./dom-ready";import{getPopupObject as n}from"./get-popup-object";void 0===window.HTMLDialogElement&&(async()=>{const{default:t}=await import("dialog-polyfill");i("dialog").init((function(){t.registerDialog(this)}))})();export function popup(l={}){return new Promise(((s,o)=>{l=Object.assign({type:"inline",isModal:!0,popupId:"",linkSelector:""},l),t((()=>{if(l.linkSelector)i(l.linkSelector).firstShow((function(){const i=this.querySelectorAll("img");"video"===l.type&&i.length>0&&(this.classList.add("with-btn-play"),i.forEach((i=>{i.classList.add("with-btn-play__img"),i.classList.contains("alignleft")?this.classList.add("with-btn-play_align-left"):i.classList.contains("alignright")?this.classList.add("with-btn-play_align-right"):i.classList.contains("alignnone")&&this.classList.add("with-btn-play_align-none")})));const t=n(l,this,o);this.addEventListener("click",(i=>{i.preventDefault(),t&&t.open()})),t&&s(t)}));else{const i=n(l,null,o);s(i)}}))}))}