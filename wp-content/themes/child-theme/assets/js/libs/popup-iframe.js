import{PopupBase as e}from "./popup-base";import{getYouTubeVideoIdFromUrl as t}from "./get-you-tube-video-id-from-url";import{getVimeoVideoIdFromUrl as s}from "./get-vimeo-video-id-from-url";export class PopupIframe extends e{constructor(e, t, s=""){const p=document.createElement("dialog");super(p,t),this.setSrc(e),this.create(),this.popup.classList.toggle("popup_video","video"===s),document.body.appendChild(p)}open(){this.iframe.src=this.src,super.open()}close(){super.close(),this.iframe.src="about:blank"}create(){this.iframe=document.createElement("iframe"),this.iframe.classList.add("popup__iframe"),this.iframe.allowfullscreen=!0,this.iframe.src="about:blank";const e=document.createElement("div");e.classList.add("popup__content"),e.append(this.iframe);const t=document.createElement("button");t.classList.add("popup__close-btn"),t.setAttribute("type","button"),t.innerHTML=`${this.getCloseSvg()}<span class="popup__close-text">Close</span>`,this.popup=document.createElement("div"),this.popup.classList.add("popup"),this.popup.classList.add("popup_iframe"),this.popup.append(e),this.popup.append(t),this.dialog.append(this.popup)}setSrc(e){let p=e.getAttribute("href");const o=t(p);if(o)p=`https://www.youtube.com/embed/${o}/?rel=0`;else{const e=s(p);e&&(p=`https://player.vimeo.com/video/${e}/?title=0&byline=0`)}this.src=p}}
