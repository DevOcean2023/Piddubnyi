export class ThemeHTMLElement extends HTMLElement{static slug="theme-element";currentElement=this;childrenNames=[];childrenElements={};readyStatus=!1;connectedStatus=!1;blockName="";connectedCallback(){if(this.connectedStatus)return;this.connectedStatus=!0;const e=[];this.childrenNames.forEach((t=>{this.childrenElements[t]=[],this.querySelectorAll(`:scope > ${t}`).forEach((s=>{this.childrenElements[t].push(s),e.push(new Promise((e=>{s.addEventListener("complete-child",e,{once:!0})})))}))})),this.runBeforeChildrenComplete(),Promise.all(e).then((()=>{this.runAfterChildrenComplete(),this.runBeforeComplete(),this.dispatchEvent(new CustomEvent("complete-child",{bubbles:!0})),this.runAfterComplete(),this.readyStatus=!0,this.dispatchEvent(new CustomEvent(`${this.constructor.slug}-ready`,{bubbles:!0,cancelable:!0}))}))}runBeforeChildrenComplete(){}runAfterChildrenComplete(){}runBeforeComplete(){}runAfterComplete(){}getBlockName(){if(this.blockName)return this.blockName;if(this.hasAttribute("block-name"))return this.getAttribute("block-name");const e=this.classList.item(0);return e&&e.split("__")[0]||this.getSlugName()}getModifiers(){const e=this.getAttribute("modifier")||this.getAttribute("modifiers");return e?e.split(" "):[]}getSlugName(e=""){return e?e.replace(/^theme-/,""):this.constructor.slug.replace(/^theme-/,"")}getBlockClassName(e=[],t=[]){const s=this.getBlockName(),r=s===this.getSlugName()?s:`${s}__${this.getSlugName()}`;let i=r;e.push(...this.getModifiers()),e.forEach((e=>{e&&(i+=` ${r}_${e}`)}));const n=`${i} ${this.currentElement.className}`.trim().split(/ +/).filter(((e,t,s)=>s.indexOf(e)===t));if(t.length){const e=[];return t.forEach((t=>{t&&e.push(`${r}_${t}`)})),n.filter((t=>!e.includes(t))).join(" ")}return n.join(" ")}getElementClassName(e=[],t=[]){const s=this.getBlockName(),r=this.getSlugName(),i=s===r?r:`${s}__${r}`;let n=i;e.push(...this.getModifiers()),e.forEach((e=>{e&&(n+=` ${i}_${e}`)}));const l=`${n} ${this.currentElement.className}`.trim().split(/ +/).filter(((e,t,s)=>s.indexOf(e)===t));if(t.length){const e=[];return t.forEach((t=>{t&&e.push(`${i}_${t}`)})),l.filter((t=>!e.includes(t))).join(" ")}return l.join(" ")}getNewElement(e){e={name:"",properties:{},attributes:{},append:[],...e};const t=document.createElement(e.name);if(e.attributes)for(const s in e.attributes)t.setAttribute(s,e.attributes[s]);if(e.properties)for(const s in e.properties)t[s]=e.properties[s];return e.append&&t.append(...e.append),t}replaceCurrent(e){this.currentElement=e,this.replaceWith(e)}addEventListener(e,t,s){`${this.constructor.slug}-ready`===e&&this.readyStatus?t():super.addEventListener(e,t,s)}}